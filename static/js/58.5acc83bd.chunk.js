(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{203:function(e,a,t){"use strict";var n=t(3),s=t.n(n),r=t(6),c=t(11),o=t(34),l=t(35),m=t(37),p=t(36),i=t(38),u=t(0),d=t.n(u),h=t(154),b=t(136),f=t(137),E=t(147),y=t(148),g=t(149),v=t(262),w=t(263),N=t(155),k=t(122),C=t(261),x=t(27),j=t(42),O=t(18),S=t(45),_="^[\\w.@+-]+$",T=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(m.a)(this,Object(p.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n="checkbox"===a.type?a.checked:a.value,s=a.name;t.setState(Object(c.a)({},s,n))},t.onSubmit=function(){var e=Object(r.a)(s.a.mark(function e(a){var n,r,c,o,l,m,p,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=[],t.state.username.match(_)){e.next=6;break}n.push("Username not valid"),e.next=10;break;case 6:return e.next=8,Object(x.I)(t.state.username);case 8:(r=e.sent).available||n.push("Username '".concat(r.username,"' not available"));case 10:if(t.state.confirmpass!==t.state.password&&n.push("Password and confirm password is not same"),0===n.length){e.next=15;break}alert(n.join("\n")),e.next=40;break;case 15:if("Supplier"!==t.props.type){e.next=27;break}return e.prev=16,e.next=19,Object(x.V)(t.state);case 19:alert("User created successful"),t.props.signInAction(t.state.username,t.state.password),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(16),alert("Problem creating user"),console.log(e.t0);case 27:if("Shipper"!==t.props.type){e.next=40;break}return e.prev=28,c=t.state,o=c.username,l=c.email,m=c.password,p=c.company_code,i=c.company_name,e.next=32,Object(x.U)({username:o,email:l,password:m,company_name:i,company_code:p});case 32:alert("User created successful"),t.props.signInAction(t.state.username,t.state.password),e.next=40;break;case 36:e.prev=36,e.t1=e.catch(28),alert("Problem creating user"),console.log(e.t1);case 40:case"end":return e.stop()}},e,null,[[16,23],[28,36]])}));return function(a){return e.apply(this,arguments)}}(),t.state={username:"",email:"",password:"",confirmpass:"",company_code:"",company_name:"",companiesList:[]},t}return Object(i.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;"Shipper"===this.props.type?Object(x.u)(x.a).then(function(a){e.setState({companiesList:a})}).catch(function(e){return console.log(e)}):"Supplier"===this.props.type&&Object(x.u)(x.b).then(function(a){e.setState({companiesList:a})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,a=this.state.companiesList;return this.props.isAuthenticated?d.a.createElement(S.a,{to:"".concat(this.props.redirectTo.split("#")[1])}):d.a.createElement("div",{className:"app flex-row align-items-center"},d.a.createElement(h.a,null,d.a.createElement(b.a,{className:"justify-content-center"},d.a.createElement(f.a,{md:"9",lg:"7",xl:"6"},d.a.createElement(E.a,{className:"mx-4"},d.a.createElement(y.a,{className:"p-4"},d.a.createElement(g.a,{onSubmit:this.onSubmit},d.a.createElement("input",{type:"hidden",className:"form-control",name:"user-type",value:this.props.type}),d.a.createElement("h1",null,"Register for ",this.props.type),d.a.createElement("p",{className:"text-muted"},"Create your account"),d.a.createElement(v.a,{className:"mb-3"},d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(N.a,null,d.a.createElement("i",{className:"icon-user"}))),d.a.createElement("input",{type:"text",placeholder:"Username",className:"form-control",name:"username",onChange:this.handleChange,value:this.state.username})),d.a.createElement(v.a,{className:"mb-3"},d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(N.a,null,"@")),d.a.createElement("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",onChange:this.handleChange,value:this.state.email})),d.a.createElement(v.a,{className:"mb-3"},d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(N.a,null,d.a.createElement("i",{className:"icon-lock"}))),d.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"form-control",onChange:this.handleChange,value:this.state.password})),d.a.createElement(v.a,{className:"mb-4"},d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(N.a,null,d.a.createElement("i",{className:"icon-lock"}))),d.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"confirmpass",className:"form-control",onChange:this.handleChange,value:this.state.confirmpass})),d.a.createElement(v.a,{className:"mb-4"},d.a.createElement("div",{className:"input-group-prepend"},d.a.createElement("label",{className:"input-group-text",htmlFor:"inputGroupSelect01"},"Company")),d.a.createElement("select",{onChange:function(a){e.setState({company_name:a.target.value})},className:"custom-select",id:"inputGroupSelect01"},d.a.createElement("option",{selected:!0},"Choose..."),a.map(function(e){return d.a.createElement("option",{key:e.company_name},e.company_name)}))),d.a.createElement(v.a,{className:"mb-4"},d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(N.a,null,d.a.createElement("i",{className:"icon-lock"}))),d.a.createElement("input",{type:"number",placeholder:"Company Code",name:"company_code",className:"form-control",onChange:this.handleChange,value:this.state.company_code})),this.state.password!==this.state.confPass?"Password and confirm password should be same":"",d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(k.a,{color:"success",block:!0},"Create Account"))),d.a.createElement(C.a,{className:"p-4"}))))))}}]),a}(u.Component);a.a=Object(O.b)(function(e){return{isAuthenticated:e.auth.authenticated,redirectTo:e.navigation.redirectTo}},function(e){return{signInAction:function(a,t){return e(Object(j.b)(a,t))}}})(T)},561:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(203);a.default=function(){return s.a.createElement(r.a,{type:"Supplier"})}}}]);
//# sourceMappingURL=58.5acc83bd.chunk.js.map